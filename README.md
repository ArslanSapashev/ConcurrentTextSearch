# ConcurrentTextSearch
Программа поиска заданного текста в файлах. Поиск осуществляется до первого совпадения.<br>
Приложение может работать в многопоточном режиме. Количество потоков создаваемых программой задается через параметры командной строки при запуске приложения.<br> ВАЖНО если количество потоков заданных через аргумент командной строки будет превышать количество файлов в которых осуществляется поиск, то число создаваемых потоков будет уменьшено до величины равной количеству файлов в которых осуществляется поиск.

Приложение состоит из 4 классов:<br>
###### 1) SimpleConcurrentSearch - проверяет аргументы командной строки, создает пул потоков (объект ThreadPool) и запускает его.
###### 2) ThreadPool - создает потоки поиска и распределяет между потоками файлы среди которых надо искать искомый текст
###### 3) SearchThread - реализует интерфейс Runnable и осуществляет поиск искомого текста в файлах.
###### 4) MissedArgumentException - пользовательский тип проверяемого исключения. Выбрасывается в случае неверного числа аргументов командной строки.

При запуске приложения необходимо указать следующие параметры командной строки:<br>
1. Место откуда надо начинать поиск (поиск осуществляется в данном месте и во всех подкаталогах)<br>
2. Текст который необходимо найти<br>
3. Количество потоков поиска<br>

---

Класс SimpleConcurrentSearch<br>
Метод start проверяет что число аргументов командной строки не менее 3-х, а также что место указанное для начала поиска существует, т.е. путь указан верно. Затем создает объект типа ThreadPool и вызывает у него метод start.

---

Класс ThreadPool<br>
При вызове метода start, вызывается метод createFileList, который рекурсивно проходит по дереву подкаталогов и создает список файлов присутствующих в месте поиска и всех его подкаталогах. Указанный список файлов хранится в поле files. Затем метод start проверяет если количество файлов в которых надо искать меньше числа потоков, указанных в командной строке, то число создаваемых потоков приравнивается к числу файлов. 
Число файлов обрабатываемых каждым потоком вычисляется как отношение числа файлов к числу потоков. Затем в теле цикла в список threads создаются и помещяются новые потоки. 
Каждому потоку передается в качестве параметров:<br> 
1) список файлов среди которых надо искать<br> 
2) текст который надо найти<br>
3) ссылка на список созданных потоков (указанный список будет использован потоком (после нахождения текста в файле) для вызова метода interrupt у других потоков).<br> 

После создания потоков метод start осуществляет их запуск и присоединяется к каждому потоку (join).

---

Класс SearchThread<br> 
реализует интерфейс Runnable и представляет собой отдельную логическую единицу выполняющую поиск искомого текста в рамках отдельного потока приложения.<br>
Методы класса:<br>
1) run <br>
2) checkFileByString<br>
3) checkMatch<br>
4) interruptOtherThreads<br>

При запуске метода run каждый файл в списке файлов данного потока, проверяется на содержание искомого текста. Для этого метод run вызывает метод checkFileByString и передает ему в качестве параметра ссылку на файл. Если в данном файле будет найден искомый текст, то вызывается метод interruptOtherThreads, который вызывает interrupt для каждого созданного потока, за исключением текущего.

Метод checkFileByString открывает переданный ему файл и осуществляет построчное считываение файла. Каждая считанная строка передается в метод, который осуществляет поиск искомого текста в данной строке.
Каждый из потоков с помощью вызова Thread.currentThread().isInterrupted() проверяет выставлен ли флаг interrupted для данного потока и если да, то логгирует и прекращает свою работу. 
